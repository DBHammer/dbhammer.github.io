<!DOCTYPE html>
<html lang="en" data-dark="false">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!--
  put your analytics (e.g. Google Analytics) tracking code here
-->

  <!--
  put your search engine verification (e.g. Google Search Console) tag here
-->

  






























<meta name="viewport" content="width=device-width, initial-scale=1">

<title>OceanBaseå†…æ ¸åˆæ¢ | DBHammer</title>

<link rel="icon" href="">

<meta name="title" content="OceanBaseå†…æ ¸åˆæ¢">
<meta name="description" content="DaSE, ECNU. The official website of DBHammer, DaSE, ECNU.">

<meta property="og:title" content="OceanBaseå†…æ ¸åˆæ¢">
<meta property="og:site_title" content="DBHammer">
<meta property="og:description" content="DaSE, ECNU. The official website of DBHammer, DaSE, ECNU.">
<meta property="og:url" content="https://dbhammer.github.io">
<meta property="og:image" content="">
<meta property="og:locale" content="en_US">

<meta property="twitter:title" content="OceanBaseå†…æ ¸åˆæ¢">
<meta property="twitter:description" content="DaSE, ECNU. The official website of DBHammer, DaSE, ECNU.">
<meta property="twitter:url" content="https://dbhammer.github.io">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="">


  <meta name="author" content="èƒ¡æ¢“é”">
  <meta property="og:type" content="article">
  <meta property="og:updated_time" content="2025-07-09T08:04:51+00:00">
  <meta property="article:published_time" content="2022-05-11T00:00:00+00:00">
  <meta property="article:modified_time" content="2025-07-09T08:04:51+00:00">
  <meta name="revised" content="2025-07-09T08:04:51+00:00">


<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "BlogPosting",
      "author": { "@type": "Person", "name": "OceanBaseå†…æ ¸åˆæ¢" },
      "datePublished": "2022-05-11T00:00:00+00:00",
      "dateModified": "2025-07-09T08:04:51+00:00",
    
    "name": "OceanBaseå†…æ ¸åˆæ¢",
    "description": "DaSE, ECNU. The official website of DBHammer, DaSE, ECNU.",
    "headline": "OceanBaseå†…æ ¸åˆæ¢",
    "publisher": {
      "@type": "Organization",
      "logo": { "@type": "ImageObject", "url": "" }
    },
    "url": "https://dbhammer.github.io"
  }
</script>

<link rel="alternate" type="application/rss+xml" href="https://dbhammer.github.io/feed.xml">

  <!-- Google Fonts -->
<!-- automatically get url from fonts used in theme file -->

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?display=swap&&family=Barlow:ital,wght@0,200;0,400;0,500;0,600;1,200;1,400;1,500;1,600&amp;family=Roboto+Mono:ital,wght@0,200;0,400;0,500;0,600;1,200;1,400;1,500;1,600" rel="stylesheet">

<!-- Font Awesome icons (load asynchronously due to size) -->

<link href="https://use.fontawesome.com/releases/v6.7.0/css/all.css" rel="stylesheet" media="none" onload="this.removeAttribute('media'); this.onload = null;">
<noscript>
  <link href="https://use.fontawesome.com/releases/v6.7.0/css/all.css" rel="stylesheet">
</noscript>

  <!-- third party styles -->
<!-- https://stylishthemes.github.io/Syntax-Themes/pygments/ -->
<link href="https://cdn.jsdelivr.net/gh/StylishThemes/Syntax-Themes/pygments/css-github/pygments-tomorrow-night-eighties.css" rel="stylesheet">

<!-- include all sass in styles folder -->


  
    <link href="/_styles/-theme.css" rel="stylesheet">
  

  
    <link href="/_styles/alert.css" rel="stylesheet">
  

  
    <link href="/_styles/all.css" rel="stylesheet">
  

  
    <link href="/_styles/anchor.css" rel="stylesheet">
  

  
    <link href="/_styles/background.css" rel="stylesheet">
  

  
    <link href="/_styles/banner.css" rel="stylesheet">
  

  
    <link href="/_styles/blog-article.css" rel="stylesheet">
  

  
    <link href="/_styles/body.css" rel="stylesheet">
  

  
    <link href="/_styles/bold.css" rel="stylesheet">
  

  
    <link href="/_styles/button.css" rel="stylesheet">
  

  
    <link href="/_styles/card.css" rel="stylesheet">
  

  
    <link href="/_styles/checkbox.css" rel="stylesheet">
  

  
    <link href="/_styles/citation.css" rel="stylesheet">
  

  
    <link href="/_styles/code.css" rel="stylesheet">
  

  
    <link href="/_styles/cols.css" rel="stylesheet">
  

  
    <link href="/_styles/dark-toggle.css" rel="stylesheet">
  

  
    <link href="/_styles/details.css" rel="stylesheet">
  

  
    <link href="/_styles/feature.css" rel="stylesheet">
  

  
    <link href="/_styles/figure.css" rel="stylesheet">
  

  
    <link href="/_styles/float.css" rel="stylesheet">
  

  
    <link href="/_styles/font.css" rel="stylesheet">
  

  
    <link href="/_styles/footer.css" rel="stylesheet">
  

  
    <link href="/_styles/form.css" rel="stylesheet">
  

  
    <link href="/_styles/gallery.css" rel="stylesheet">
  

  
    <link href="/_styles/grid.css" rel="stylesheet">
  

  
    <link href="/_styles/header.css" rel="stylesheet">
  

  
    <link href="/_styles/heading.css" rel="stylesheet">
  

  
    <link href="/_styles/highlight.css" rel="stylesheet">
  

  
    <link href="/_styles/icon.css" rel="stylesheet">
  

  
    <link href="/_styles/image.css" rel="stylesheet">
  

  
    <link href="/_styles/input.css" rel="stylesheet">
  

  
    <link href="/_styles/link.css" rel="stylesheet">
  

  
    <link href="/_styles/list.css" rel="stylesheet">
  

  
    <link href="/_styles/main.css" rel="stylesheet">
  

  
    <link href="/_styles/member-intro.css" rel="stylesheet">
  

  
    <link href="/_styles/paragraph.css" rel="stylesheet">
  

  
    <link href="/_styles/portrait.css" rel="stylesheet">
  

  
    <link href="/_styles/post-excerpt.css" rel="stylesheet">
  

  
    <link href="/_styles/post-info.css" rel="stylesheet">
  

  
    <link href="/_styles/post-nav.css" rel="stylesheet">
  

  
    <link href="/_styles/quote.css" rel="stylesheet">
  

  
    <link href="/_styles/role.css" rel="stylesheet">
  

  
    <link href="/_styles/rule.css" rel="stylesheet">
  

  
    <link href="/_styles/search-box.css" rel="stylesheet">
  

  
    <link href="/_styles/search-info.css" rel="stylesheet">
  

  
    <link href="/_styles/section.css" rel="stylesheet">
  

  
    <link href="/_styles/table.css" rel="stylesheet">
  

  
    <link href="/_styles/tags.css" rel="stylesheet">
  

  
    <link href="/_styles/textbox.css" rel="stylesheet">
  

  
    <link href="/_styles/tooltip.css" rel="stylesheet">
  

  
    <link href="/_styles/two-col.css" rel="stylesheet">
  

  
    <link href="/_styles/util.css" rel="stylesheet">
  


<!-- include all css in styles folder -->



  <!-- third party scripts -->
<script src="https://unpkg.com/@popperjs/core@2" defer></script>
<script src="https://unpkg.com/tippy.js@6" defer></script>
<script src="https://unpkg.com/mark.js@8" defer></script>

<!-- include all js in scripts folder -->


  <script src="/_scripts/anchors.js"></script>

  <script src="/_scripts/dark-mode.js"></script>

  <script src="/_scripts/fetch-tags.js"></script>

  <script src="/_scripts/search.js"></script>

  <script src="/_scripts/site-search.js"></script>

  <script src="/_scripts/table-wrap.js"></script>

  <script src="/_scripts/tooltip.js"></script>

  <script src="/_scripts/tooltips.js"></script>

  <script src="/_scripts/true-hide.js"></script>

  <script src="/_scripts/util.js"></script>


</head>

  <body>
    







<header class="background" style="--image: url('')" data-dark="true">
  <a href="/" class="home">
    
      <span class="logo">
        
          <svg xmlns="http://www.w3.org/2000/svg" viewbox="-50 -50 100 100" style="overflow: visible">
  <style>
  circle {
    animation: float 2s ease-out forwards infinite,
    fade 2s ease-out forwards infinite;
  }
  circle:nth-of-type(1) {
    animation-delay: 0.1s;
  }
  circle:nth-of-type(2) {
    animation-delay: 0.4s;
  }
  circle:nth-of-type(3) {
    animation-delay: 1.1s;
  }
  @keyframes float {
    50% {
      transform: translateY(0);
    }
    100% {
      transform: translateY(-45px);
    }
  }
  @keyframes fade {
    75% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
  </style>
  <circle fill="#b3e5fc" cx="0" cy="0" r="3"></circle>
  <circle fill="#b3e5fc" cx="0" cy="0" r="3"></circle>
  <circle fill="#b3e5fc" cx="0" cy="0" r="3"></circle>
  <path fill="#81d4fa" d="
      M 0.0 -15.0
      L -21.7 -2.5
      L -21.7 22.5
      L -0.0 35.0
      L 21.7 22.5
      L 21.7 -2.5
      z
    "></path>
  <path fill="#b3e5fc" d="
      M 0.0 -15.0
      L -21.7 -2.5
      L 0 10
      L 21.7 -2.5
      z
    "></path>
  <path fill="none" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" d="
      M -15 -43
      L -10 -43
      L -10 -19.2
      L -30.3 -7.5
      L -30.3 27.5
      L -0 45
      L 30.3 27.5
      L 30.3 -7.5
      L 10 -19.2
      L 10 -43
      L 15 -43
    "></path>
</svg>

        
      </span>
    
    
      <span class="title-text" data-tooltip="Home">
        
          <span class="title">DBHammer</span>
        
        
          <span class="subtitle">DaSE, ECNU</span>
        
      </span>
    
  </a>

  <input class="nav-toggle" type="checkbox" aria-label="show/hide nav">

  <nav>
    
    
      
        <a href="/project/" data-tooltip="Software, datasets, and more">
          é¡¹ç›®
        </a>
      
    
      
        <a href="/blog/" data-tooltip="Musings and miscellany">
          åšå®¢
        </a>
      
    
      
        <a href="/research/" data-tooltip="Published works">
          è®ºæ–‡
        </a>
      
    
      
        <a href="/work/" data-tooltip="News">
          æ–°é—»
        </a>
      
    
      
        <a href="/news/" data-tooltip="News">
          æ–°é—»
        </a>
      
    
      
        <a href="/team/" data-tooltip="About our team">
          æˆå‘˜
        </a>
      
    
      
        <a href="/contact/" data-tooltip="Email, address, and location">
          å°±ä¸šå»å‘
        </a>
      
    
  </nav>
</header>

    <main>
      <!--
  modify main content of page:
  - add section breaks
  - attach section properties
  - filter out blank sections
-->






  
  
  

  <section class="background" data-size="1">
    <!--
  background: ;
  dark: ;
  size: 1;
-->


<h1 class="center">OceanBaseå†…æ ¸åˆæ¢</h1>

<div class="post-info">
  
    
    
      



<div class="portrait-wrapper">
  <a href="/members/%E8%83%A1%E6%A2%93%E9%94%90.html" class="portrait" data-style="tiny" aria-label="èƒ¡æ¢“é”">
    
      <i class="icon fas fa-graduation-cap"></i>
    

    <img src="/photos/huzirui.jpg" class="portrait-image" alt="member portrait" loading="lazy" onerror="this.src = '/images/fallback.svg'; this.onerror = null;">

    
      <span class="portrait-name">
        èƒ¡æ¢“é”
      </span>
    

    
      <span class="portrait-description">
        
      </span>
    

    
  </a>
</div>

    
  

  
  

  
    <span data-tooltip="Originally published on">
      <i class="icon fa-regular fa-calendar"></i>
      <span>May 11, 2022</span>
    </span>
  

  
    <span data-tooltip="Last updated on">
      <i class="icon fa-solid fa-clock-rotate-left"></i>
      <span>July 09, 2025</span>
    </span>
  
</div>


  


  <div class="tags" data-link="/blog">
    
      <a href='blog?search="tag:%20oceanbase"' class="tag" data-tooltip='Show items with the tag "oceanbase"'>
        oceanbase
      </a>
    
  </div>
  </section>

  
  
  

  <section class="background" data-size="page">
    <!--
  background: ;
  dark: ;
  size: ;
-->


<blockquote>
  <p>ğŸ’¡ <strong>ä½œè€…ï¼šåä¸œå¸ˆèŒƒå¤§å­¦ æ•°æ®ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢ DBHammeré¡¹ç›®ç»„ ä¸œäºšç”·å„¿å›¢é˜Ÿ</strong></p>
</blockquote>

<p>æœ¬æ–‡ä¸»ä½“é¢å‘å¯¹OceanBaseæ•°æ®åº“æºç ä»¥åŠç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–æ„Ÿå…´è¶£çš„åˆå­¦è€…ä¾›ä»¥æŠ€æœ¯äº¤æµï¼Œç¬”è€…æ¥è‡ª<a href="https://dbhammer.github.io/">åä¸œå¸ˆèŒƒå¤§å­¦æ•°æ®ç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢DBHammeré¡¹ç›®ç»„</a>ã€‚</p>

<p>æœ¬æ–‡ä¸»ä½“åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå¦‚ä½•å¿«é€Ÿå¯¹OceanBaseè¿›è¡Œè°ƒè¯•ï¼›ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–åˆ©å™¨-ç«ç„°å›¾çš„ç®€è¦ä»‹ç»ï¼›é¢å‘èµ›é¢˜Nested Loop Joinçš„åº”ç”¨åœºæ™¯ï¼Œå¦‚ä½•è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚</p>

<h2 id="oceanbaseå¿«é€Ÿdebug">OceanBaseå¿«é€ŸDebug</h2>

<h3 id="å¼•è¨€">å¼•è¨€</h3>

<p>æœ¬æ–‡ä»¥åœ¨VSCodeç¼–è¾‘å™¨ä¸ŠOceanBase 3.1ç‰ˆæœ¬ä¸ºä¾‹ï¼Œè¿›è¡ŒDebugçš„æ•™å­¦ï¼Œæœ¬åœ°OBæ­å»ºçš„æ•™ç¨‹å¯ä»¥å‚è€ƒ<a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/get-the-oceanbase-database-by-using-source-code">ä½¿ç”¨æºç æ„å»º OceanBase æ•°æ®åº“</a> å’Œ <a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/deploy-the-oceanbase-database-by-using-obd">ä½¿ç”¨OBDéƒ¨ç½²OceanBase</a>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯OBDç›®å‰åªæœ‰rpmåŒ…ï¼Œåœ¨Ubuntuç¯å¢ƒä¸‹çš„å…·ä½“å®‰è£…æ–¹æ³•å¯è§<a href="https://linuxize.com/post/install-rpm-packages-on-ubuntu/">Install RPM packages on Ubuntu | Linuxize</a>ã€‚</p>

<h3 id="æ­¥éª¤ä¸€åˆ›å»ºç§Ÿæˆ·">æ­¥éª¤ä¸€ï¼šåˆ›å»ºç§Ÿæˆ·</h3>

<p>åœ¨å®‰è£…éƒ¨ç½²å¥½OBåï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç§Ÿæˆ·ã€‚å½“OBé›†ç¾¤åˆ›å»ºå®Œæˆæ—¶ï¼Œåªæœ‰ä¸€ä¸ªé»˜è®¤çš„sysç§Ÿæˆ·ï¼Œè€Œsysç§Ÿæˆ·ä»…ç”¨äºé›†ç¾¤ç®¡ç†ï¼Œå¹¶ä¸èƒ½æ”¯æŒæµ‹è¯•æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åˆ›å»ºæ–°çš„ç§Ÿæˆ·ç”¨äºæµ‹è¯•ã€‚</p>

<p>OBDæä¾›äº†æ–¹ä¾¿çš„åˆ›å»ºç§Ÿæˆ·çš„å‘½ä»¤ã€‚ åœ¨OBæ¯”èµ›çš„ç®€å•åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä»…åˆ›å»ºä¸€ä¸ªç§Ÿæˆ·ï¼š</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">obd</span> <span class="k">cluster</span> <span class="n">tenant</span> <span class="k">create</span> <span class="n">obadvanced</span> <span class="c1">--tenant-name mysql</span>
</code></pre></div></div>

<p>è¿™ä¸ªå‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmysql çš„ç§Ÿæˆ·ï¼Œå¹¶ä¸ºå®ƒåˆ†é…äº†å‰©ä¸‹çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºï¼Œæ²¡æœ‰è®¾ç½®å¯†ç ã€‚</p>

<p>æ¥ç€æˆ‘ä»¬ä½¿ç”¨mysqlç§Ÿæˆ·è¿æ¥æ•°æ®åº“ï¼ŒåŠ ä¸Š-cä»¥ç¡®ä¿ä¹‹åè¾“å…¥çš„<a href="https://help.aliyun.com/apsara/enterprise/v_3_13_0_20201215/oceanbase/enterprise-user-guide/hint-overview.html">sql hint</a>ç”Ÿæ•ˆï¼š</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span><span class="o">@</span><span class="n">mysql</span> <span class="o">-</span><span class="n">h127</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="o">-</span><span class="n">P</span> <span class="mi">2881</span> <span class="o">-</span><span class="k">c</span>
</code></pre></div></div>

<p>è¾“å…¥æŒ‡ä»¤åå³å¯çœ‹åˆ°æ•°æ®åº“è¿æ¥ç•Œé¢ï¼š</p>

<p><img src="/auto-image/picrepo/eb7643e3-1f60-451d-9dd7-ed255596ec32.png" alt="image-20220502160801229"></p>

<h3 id="æ­¥éª¤äºŒé…ç½®launchjson">æ­¥éª¤äºŒï¼šé…ç½®launch.json</h3>

<p>å‡å®šå¤§å®¶ç°åœ¨å·²ç»æ­å»ºäº†ä¸€æ¬¾æœ¬åœ°çš„OBä¸”åˆ›å»ºå¥½äº†ç›¸åº”çš„ç§Ÿæˆ·ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨.vscodeç›®å½•ä¸‹åˆ›å»ºlaunch.jsonæ–‡ä»¶ä»¥é…ç½®å…·ä½“çš„gdbè°ƒè¯•ç¯å¢ƒã€‚</p>

<p>æˆ‘ä»¬é‡‡å–çš„æ˜¯gdb attach <pid>çš„æ–¹å¼è¿›è¡Œdebugï¼Œè€Œæ¯æ¬¡OBå¯åŠ¨æ—¶å…¶è¿›ç¨‹å·å¹¶ä¸å›ºå®šï¼Œæ‰€ä»¥æˆ‘ä»¬é…ç½®äº†tasks-shell-inputæ’ä»¶ï¼ˆå¯ä»¥åœ¨vscodeæ‰©å±•ä¸­ä¸‹è½½ï¼‰ï¼Œä»¥grepçš„æ–¹å¼è¿›è¡Œserverç«¯è¿›ç¨‹å·çš„é€‰å–å’Œè‡ªåŠ¨åŒ–å¡«å……ï¼Œè¿™ä¸ºè°ƒè¯•å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚</pid></p>

<p>ä»¥ä¸‹æˆ‘ä»¬ç»™å‡ºä¸€ä¸ªç¤ºä¾‹æ–‡ä»¶ï¼š</p>

<p>ï¼ˆå…¶ä¸­å‡ºç°çš„ä¸€äº›è¯¸å¦‚ob-advancedè¿™ç§åˆ›å»ºOBæ—¶è‡ªå®šä¹‰çš„åç§°æˆ–è€…æ–‡ä»¶ç›®å½•ä½ç½®éƒ½éœ€è¦å†è‡ªè¡Œè°ƒæ•´ï¼ŒsourceFileMapä¹Ÿå¯èƒ½éœ€è¦æ ¹æ®éœ€æ±‚æ‰‹åŠ¨å¢åŠ mappingï¼Œæ›´å¤šçš„jsoné…ç½®é¡¹è¯­ä¹‰å¯è§<a href="https://code.visualstudio.com/docs/cpp/launch-json-reference">å®˜ç½‘</a>ï¼‰</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"configurations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(gdb) Attach"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cppdbg"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attach"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/data/ob-advanced/bin/observer"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"processId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${input:FindPID}"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"MIMode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gdb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sudo"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"miDebuggerPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gdb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"setupCommands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable pretty-printing for gdb"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-enable-pretty-printing"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"ignoreFailures"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"sourceFileMap"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"./build_debug/src/observer/./src/observer/omt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"editorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceFolder}/src/observer/omt"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"./build_debug/src/sql/parser/./src/sql/parser"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"editorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceFolder}/src/sql/parser"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"useForBreakpoints"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"./build_debug/src/sql/./src/sql"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"editorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceFolder}/src/sql"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"useForBreakpoints"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"./build_debug/src/storage/./src/storage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"editorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceFolder}/src/storage"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"useForBreakpoints"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"./build_debug/src/sql/engine/join/./src/sql/engine/join"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"editorPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceFolder}/src/sql/engine/join"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"useForBreakpoints"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FindPID"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"command"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shellCommand.execute"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ps -aux | grep /bin/observer | grep -v </span><span class="se">\\</span><span class="s2">"</span><span class="err">grep\\</span><span class="s2">" | awk '{print $2}'"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Select your observer PID"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"useFirstResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p>ğŸ’¡ å¦‚æœé‡åˆ°ä¸‹é¢çš„é—®é¢˜ <code class="language-plaintext highlighter-rouge">Authentication is needed to run </code>/usr/bin/gdbâ€™ as the super user` å¯ä»¥è¾“å…¥æŒ‡ä»¤<strong>echo 0| sudo tee /proc/sys/kernel/yama/ptrace_scope</strong>è°ƒæ•´æƒé™è§£å†³</p>
</blockquote>

<p>æœ€ç»ˆç‚¹å‡»å·¦ä¸Šè§’çš„è°ƒè¯•æŒ‰é’®ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œå³å¯çœ‹åˆ°å®Œæ•´çš„è°ƒè¯•ç•Œé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="/auto-image/picrepo/25aa13c8-b25b-4170-a65c-6f8425fba916.png" alt="image-20220502160910433"></p>

<h3 id="æ­¥éª¤ä¸‰å¢åŠ breakpointå’Œæ‰€éœ€è§‚æµ‹å˜é‡">æ­¥éª¤ä¸‰ï¼šå¢åŠ Breakpointå’Œæ‰€éœ€è§‚æµ‹å˜é‡</h3>

<p>æ¥ç€æˆ‘ä»¬é€šè¿‡obclient/mysqlæ¨¡å¼è¿æ¥OBã€‚</p>

<p>ä¸ºäº†è°ƒè¯•çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦é€‚å½“å¢å¤§äº‹åŠ¡è¶…æ—¶æ—¶é—´ä»¥é¿å…è°ƒè¯•å†…éƒ¨å› å¯èƒ½çš„è¶…æ—¶åŸå› æå‰ç»ˆæ­¢è€Œå½±å“åˆ¤æ–­ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">set</span> <span class="k">global</span> <span class="n">ob_trx_idle_timeout</span><span class="o">=</span><span class="mi">120000000</span><span class="p">;</span>
<span class="k">set</span> <span class="k">global</span> <span class="n">ob_trx_timeout</span><span class="o">=</span><span class="mi">36000000000</span><span class="p">;</span>
<span class="k">set</span> <span class="k">global</span> <span class="n">ob_query_timeout</span><span class="o">=</span><span class="mi">3600000000</span>
</code></pre></div></div>

<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³å…ˆè§‚å¯Ÿä¸€ä¸‹å½“å‰çš„åœºæ™¯æ˜¯å¦å¼€å¯äº†batchæ“ä½œï¼Œå³å¯åœ¨ob_nested_loop_join_op.cppï¼šread_left_operateå‡½æ•°é‡Œæ‰“ä¸Šæ–­ç‚¹ï¼ˆä¹Ÿå¯ä»¥å³é”®ç¼–è¾‘æ¡ä»¶æ–­ç‚¹ï¼‰ã€‚</p>

<p><img src="/auto-image/picrepo/dbf00cc3-ae93-4fcc-b467-392e618194d0.png" alt="image-20220502160922103"></p>

<p>æ¥ç€æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥è´Ÿè½½æ ·ä¾‹ï¼š</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="cm">/*+ordered use_nl(A,B)*/</span> <span class="o">*</span> <span class="k">from</span> <span class="n">t1</span> <span class="n">A</span><span class="p">,</span> <span class="n">t2</span> <span class="n">B</span> <span class="k">where</span> <span class="n">A</span><span class="p">.</span><span class="n">c1</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">100</span> <span class="k">and</span> <span class="n">A</span><span class="p">.</span><span class="n">c1</span> <span class="o">&lt;</span> <span class="mi">200</span> <span class="k">and</span> <span class="n">A</span><span class="p">.</span><span class="n">c2</span> <span class="o">=</span> <span class="n">B</span><span class="p">.</span><span class="n">c2</span><span class="p">;</span>
</code></pre></div></div>

<p>ç­‰å¾…ç‰‡åˆ»å³å¯çœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„debugç•Œé¢ï¼šå…·ä½“æœ‰å››å¤§ä¿¡æ¯æ å€¼å¾—å…³æ³¨ï¼š</p>

<ol>
  <li>å·¥å…·æ ï¼šç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªbreakpointã€å•æ­¥è·³è¿‡ã€å•æ­¥è·³å‡ºã€å•æ­¥è°ƒè¯•ç­‰åŸºæœ¬è°ƒè¯•æ“ä½œï¼›</li>
  <li>å˜é‡æ ï¼šåœ¨æ­¤å¯ä»¥å±•å¼€å˜é‡ï¼Œè§‚å¯Ÿç¨‹åºæ‰§è¡ŒæœŸé—´å„å˜é‡å…·ä½“çš„å€¼ä¿¡æ¯ï¼›</li>
  <li>å †æ ˆä¿¡æ¯æ ï¼šåœ¨æ­¤å¯ä»¥è§‚æµ‹åˆ°å½“å‰ç¨‹åºæ‰§è¡ŒæœŸé—´å †æ ˆçš„ä¸Šä¸‹æ–‡è°ƒç”¨ä¿¡æ¯ï¼Œä¾¿ä»¥å¿«é€ŸæŠŠæ¡ä»£ç çš„æ•´ä½“è°ƒç”¨ç»“æ„ï¼›</li>
  <li>ç›‘è§†æ ï¼šç”±äºå˜é‡æ é‡Œçš„å¾ˆå¤šå˜é‡éƒ½æ˜¯æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œè§‚æµ‹æ—¶åªèƒ½çœ‹åˆ°å˜é‡çš„åœ°å€ä¿¡æ¯ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨ç›‘è§†æ ä¸€æ–¹é¢å¯ä»¥æ‰§è¡ŒåŸºæœ¬çš„ç±»å‹è½¬æ¢ï¼Œå–å‡ºæŒ‡é’ˆæŒ‡å‘çš„å…·ä½“å€¼ä¿¡æ¯ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥ä¸€ç›´ä¿ç•™æŸäº›éœ€è¦æŒç»­è§‚æµ‹çš„å˜é‡ã€‚</li>
</ol>

<p><img src="/auto-image/picrepo/5f4a063e-70b7-4269-96cd-6f691a8d9a44.png" alt="image-20220502160930579"></p>

<p>ä»¥ä¸Šä¾¿æ˜¯å¯¹OceanBaseçš„debugè°ƒè¯•æ–¹æ³•çš„å…¨éƒ¨ä»‹ç»ã€‚</p>

<p>é™¤äº†é€šè¿‡debugä»æ‰§è¡Œçš„ç»†èŠ‚ä¸Šè§å¾®çŸ¥è‘—ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç«ç„°å›¾å¯¹ç¨‹åºçš„æ•´ä½“æ‰§è¡Œæœ‰ä¸€ä¸ªå®è§‚çš„æŠŠæ¡ï¼Œåœ¨æ­¤æˆ‘ä»¬ç®€å•ä»‹ç»ä¸€ä¸‹ç«ç„°å›¾çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</p>

<h2 id="ç«ç„°å›¾ä»‹ç»">ç«ç„°å›¾ä»‹ç»</h2>

<h3 id="ä»€ä¹ˆæ˜¯ç«ç„°å›¾">ä»€ä¹ˆæ˜¯ç«ç„°å›¾</h3>

<p>ç«ç„°å›¾ç”±æ€§èƒ½ä¼˜åŒ–å¤§å¸ˆBrendan Greggå‘æ˜ï¼Œä»¥å›¾åƒçš„å½¢å¼å½¢è±¡åœ°å±•ç¤ºäº†ç¨‹åºæ‰§è¡Œæ—¶çš„è°ƒç”¨å †æ ˆä¿¡æ¯ï¼Œä»åº•å‘ä¸Šå±•ç¤ºå‡½æ•°çš„æ‰§è¡Œæ¯”ä¾‹ï¼Œä¾¿äºæŠ€æœ¯äººå‘˜ä»ä¸­æŠŠæ¡å¯èƒ½çš„æ€§èƒ½ç“¶é¢ˆã€‚å› å…¶é¢œè‰²ä»¥çº¢é»„æ©™ç­‰æš–è‰²ä¸ºä¸»ï¼Œåƒæ˜¯è·³åŠ¨çš„ç«ç„°ï¼Œæ•…ç§°Flame Graphï¼Œä¸‹å›¾ä¸ºOceanBase v3.1çš„æ•´ä½“ç«ç„°å›¾ã€‚</p>

<p><img src="/auto-image/picrepo/6c9c15eb-d179-41fc-8904-5eeef2eb8e78.png" alt="image-20220502160938777"></p>

<p>æ‚¬æµ®å…¶ä¸Šä¾¿èƒ½çœ‹åˆ°æŸä¸ªå‡½æ•°å…·ä½“çš„æ‰§è¡Œæ¯”ä¾‹ï¼š</p>

<p><img src="/auto-image/picrepo/6fda2122-99c1-4d04-b57b-ecc4726a54a0.png" alt="image-20220502160946520"></p>

<p>å…³äºç«ç„°å›¾ç›¸å…³çš„ä»‹ç»æ–‡æ¡£å’Œè§†é¢‘æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬åœ¨æ­¤å°±ä¸å†èµ˜è¿°äº†ï¼Œä»…åœ¨ä¸‹é¢ä½œä¸€ä¸ªç®€è¦çš„æ¦‚æ‹¬ï¼Œæ›´è¯¦ç»†çš„ä»‹ç»å¯å‚è§æ–‡ç« åº•éƒ¨æä¾›çš„é“¾æ¥ã€‚</p>

<p>ç«ç„°å›¾ä¸»ä½“æœ‰ä»¥ä¸‹ç‰¹å¾ï¼ˆè¿™é‡Œä»¥ on-cpu ç«ç„°å›¾ä¸ºä¾‹ï¼‰ï¼š</p>

<ul>
  <li>æ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªè°ƒç”¨æ ˆï¼Œæ¯ä¸€ä¸ªæ ¼å­ä»£è¡¨ä¸€ä¸ªå‡½æ•°ï¼ˆä¸€ä¸ªæ ˆå¸§ï¼‰</li>
  <li>Yè½´å±•ç¤ºäº†æ ˆçš„æ·±åº¦ï¼ŒæŒ‰ç…§è°ƒç”¨å…³ç³»ä»ä¸‹åˆ°ä¸Šæ’åˆ—ã€‚æœ€é¡¶ä¸Šçš„æ ¼å­ä»£è¡¨å½“æ‰§è¡Œé‡‡æ ·æ”¶é›†æ—¶ï¼Œå½“å‰æ­£åœ¨å ç”¨ cpu çš„å‡½æ•°ã€‚æ¯ä¸ªæ ¼å­ä¸‹é¢çš„æ ¼å­å³æ˜¯å®ƒçš„çˆ¶å‡½æ•°ã€‚</li>
  <li>Xè½´å±•ç¤ºäº†ç«ç„°å›¾å°†è¦é‡‡é›†çš„ä¸åŒè°ƒç”¨æ ˆä¿¡æ¯ï¼Œä»å·¦åˆ°å³ä»¥å‡½æ•°åç§°çš„å­—æ¯åºé¡ºåºæ’åˆ—ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨ªå‘çš„æ’åºå¹¶ä¸ä»£è¡¨æ—¶é—´çš„æµé€ï¼Œå…¶æœ¬èº«æ’åºæ˜¯æ²¡æœ‰ä»»ä½•å®ä¹‰çš„ã€‚</li>
  <li>æ¨ªè½´æ ¼å­çš„å®½åº¦ä»£è¡¨å…¶åœ¨é‡‡æ ·ä¸­å‡ºç°é¢‘ç‡ï¼Œå…¶å®½åº¦ä¸å®é™…åœ¨å †æ ˆä¸­æ‰§è¡Œçš„æ—¶é—´é•¿æˆæ­£æ¯”ï¼Œå› æ­¤å¦‚æœä¸€ä¸ªæ ¼å­çš„å®½åº¦è¶Šå¤§ï¼Œè¯´æ˜å®ƒæ˜¯ç“¶é¢ˆåŸå› çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚</li>
  <li>ç«ç„°å›¾æ ¼å­çš„é¢œè‰²æ˜¯éšæœºçš„æš–è‰²è°ƒï¼Œå…¶é¢œè‰²æ·±æµ…å¹¶æ— å…·ä½“å®ä¹‰ï¼Œåªæ˜¯å•çº¯ä¸ºäº†æ–¹ä¾¿åŒºåˆ†å„ä¸ªè°ƒç”¨ä¿¡æ¯ã€‚</li>
</ul>

<p><img src="/auto-image/picrepo/bd4fa662-a0a6-4c22-86cb-27c2392d2995.png" alt="image-20220502160958727"></p>

<p>ä»¥Brendan Greggæ‰€ç»™ç¤ºæ„å›¾æ¥è¯´ï¼š</p>

<ul>
  <li>é¡¶ç«¯çš„æ ¼å­æ˜¾ç¤ºå‡½æ•°g()å ç”¨CPUçš„æ—¶é—´æœ€å¤šï¼›</li>
  <li>å‡½æ•°d()æ›´å®½ï¼Œä½†å…¶æš´éœ²çš„é¡¶ç«¯è¾¹ç¼˜åœ¨CPUä¸Šè¿è¡Œå¾—æœ€å°‘ï¼ˆç›¸è¾ƒäºeã€fæ¥è¯´ï¼‰ï¼Œè¯´æ˜æˆ‘ä»¬å¯èƒ½æ›´éœ€è¦å…³æ³¨å…¶å­å‡½æ•°çš„è°ƒç”¨ï¼›</li>
  <li>b()å’Œc()ä¸¤ä¸ªå‡½æ•°ä¼¼ä¹å¹¶æ²¡æœ‰ç›´æ¥åœ¨CPUä¸Šé‡‡æ ·ï¼Œå®é™…åœ¨CPUä¸Šæ‰§è¡Œçš„å‡½æ•°éƒ½æ˜¯å®ƒä»¬çš„å­å‡½æ•°ï¼›</li>
  <li>g()ä¸‹é¢çš„å‡½æ•°æ˜¾ç¤ºäº†å®ƒçš„ç¥–å…ˆï¼šg()è¢«f()è°ƒç”¨ï¼Œè€Œf()åˆè¢«d()è°ƒç”¨ï¼Œä»¥æ­¤ç±»æ¨ï¼›</li>
  <li>ä»è§†è§‰ä¸Šæ¯”è¾ƒå‡½æ•°b()å’Œh()çš„å®½åº¦å¯ä»¥çœ‹å‡ºï¼Œb()çš„ä»£ç è·¯å¾„åœ¨CPUä¸Šçš„æ—¶é—´å ç”¨ä¸Šæ˜¯h()çš„4å€ï¼›</li>
  <li>åœ¨a()è°ƒç”¨b()å’Œh()çš„åœ°æ–¹ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç è·¯å¾„ä¸­å­˜åœ¨ä¸€ä¸ªåˆ†å‰ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­çš„ç»“æœï¼ˆå³å¦‚æœæœ‰æ¡ä»¶ï¼Œå°±è°ƒç”¨b()ï¼Œå¦åˆ™å°±è°ƒç”¨h()ï¼‰æˆ–è€…æ˜¯ä¸€ä¸ªç¨‹åºæ‰§è¡Œé€»è¾‘ä¸Šçš„é˜¶æ®µåˆ†ç»„ï¼ˆa()è¢«åˆ†æˆä¸¤éƒ¨åˆ†å¤„ç†ï¼šb()å’Œh()ï¼‰ã€‚</li>
  <li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒOBå†…éƒ¨å­˜åœ¨åç¨‹ï¼Œå› æ­¤ï¼Œä¸€ä¸ªæ ¼å­æš´éœ²çš„è¾¹ç¼˜éƒ¨åˆ†å¹¶ä¸ä¸€å®šå°±æ˜¯å…¶è¿è¡Œçš„æ—¶é—´ï¼Œè¿™ä¸€ç‚¹å¯èƒ½éœ€è¦é€šè¿‡çœ‹æ±‡ç¼–ä»£ç æ¥ç¡®å®šã€‚</li>
</ul>

<h3 id="å¦‚ä½•è·å–ç«ç„°å›¾">å¦‚ä½•è·å–ç«ç„°å›¾</h3>

<p>ç«ç„°å›¾æœ¬èº«çš„åˆ¶ä½œæ˜¯åŸºäºperfç”Ÿæˆçš„dataæ•°æ®è¿›è¡Œçš„ï¼Œä¸‹é¢æˆ‘ä»¬ä¾¿è¿›å…¥å·¥å…·çš„ä½¿ç”¨ä»‹ç»ï¼š</p>

<ol>
  <li>è·å–Flame Graphå·¥å…·ï¼š<code class="language-plaintext highlighter-rouge">git clone [&lt;https://github.com/brendangregg/FlameGraph.git&gt;](&lt;https://github.com/brendangregg/FlameGraph.git&gt;)</code>
</li>
  <li>æ‰§è¡Œperf record -F 99 -g -p 127 â€“ sleep 20ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆé‡‡æ ·æ•°æ®perf.data.
    <ol>
      <li>æ„å³åŸºäºæŸä¸ªæŒ‡å®špidï¼Œä»¥99hzé¢‘ç‡é‡‡æ ·ï¼ŒæŒç»­10s</li>
      <li>æ›´å¤šçš„æŒ‡ä»¤è¯¦è§https://www.brendangregg.com/perf.html</li>
    </ol>
  </li>
  <li>æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">perf script -i perf.data &amp;&gt; perf.unfold</code> ï¼Œç”¨perf scriptå·¥å…·è¯»å–perf.dataç»“æœï¼Œå¹¶å¯¹perf.dataè¿›è¡Œè§£æï¼Œå…¶è¾“å‡ºæ ¼å¼å¦‚ä¸‹ï¼š</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">/</span><span class="n">read_left_operate</span>
        <span class="n">ffffffffb86dc289</span> <span class="n">finish_task_switch</span><span class="o">+</span><span class="mi">0</span><span class="n">x199</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
        <span class="n">ffffffffb9200a46</span> <span class="n">__sched_text_start</span><span class="o">+</span><span class="mi">0</span><span class="n">x2f6</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
        <span class="n">ffffffffb920109f</span> <span class="n">schedule</span><span class="o">+</span><span class="mi">0</span><span class="n">x4f</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
        <span class="n">ffffffffb873bfd3</span> <span class="n">exit_to_user_mode_prepare</span><span class="o">+</span><span class="mi">0</span><span class="n">xf3</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
        <span class="n">ffffffffb91f7be9</span> <span class="n">irqentry_exit_to_user_mode</span><span class="o">+</span><span class="mi">0</span><span class="n">x9</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
        <span class="n">ffffffffb91f7c19</span> <span class="n">irqentry_exit</span><span class="o">+</span><span class="mi">0</span><span class="n">x19</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
        <span class="n">ffffffffb91f6c7e</span> <span class="n">sysvec_reschedule_ipi</span><span class="o">+</span><span class="mi">0</span><span class="n">x7e</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
        <span class="n">ffffffffb9400dc2</span> <span class="n">asm_sysvec_reschedule_ipi</span><span class="o">+</span><span class="mi">0</span><span class="n">x12</span> <span class="p">([</span><span class="n">kernel</span><span class="p">.</span><span class="n">kallsyms</span><span class="p">])</span>
                 <span class="mi">972</span><span class="n">e9a0</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObQueryIteratorConsumer</span><span class="p">::</span><span class="n">set_consumer_num</span><span class="o">+</span><span class="mi">0</span><span class="n">x0</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">9617</span><span class="n">ac1</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObMultipleScanMergeImpl</span><span class="p">::</span><span class="n">inner_get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">xb1</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">961793</span><span class="n">e</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObMultipleScanMerge</span><span class="p">::</span><span class="n">inner_get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x2e</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">9609</span><span class="n">eff</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObMultipleMerge</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x44f</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">9</span><span class="n">aa2c49</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObTableScanStoreRowIterator</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x119</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">9</span><span class="n">aa3807</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObTableScanRangeArrayRowIterator</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x117</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">9</span><span class="n">aa4bb7</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObTableScanIterator</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x1d7</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">9</span><span class="n">b42a55</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">storage</span><span class="p">::</span><span class="n">ObTableScanIterator</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x25</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">48266</span><span class="n">b7</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObTableScanOp</span><span class="p">::</span><span class="n">get_next_row_with_mode</span><span class="o">+</span><span class="mi">0</span><span class="n">x97</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">4826</span><span class="n">aa8</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObTableScanOp</span><span class="p">::</span><span class="n">inner_get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x3d8</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">56</span><span class="n">aa469</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObOperator</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x189</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">38731</span><span class="n">eb</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObJoinOp</span><span class="p">::</span><span class="n">get_next_left_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x2b</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">38752</span><span class="n">d3</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObBasicNestedLoopJoinOp</span><span class="p">::</span><span class="n">get_next_left_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x1a3</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">3879</span><span class="n">c31</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObNestedLoopJoinOp</span><span class="p">::</span><span class="n">group_read_left_operate</span><span class="o">+</span><span class="mi">0</span><span class="n">xb71</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">3876</span><span class="n">cf9</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObNestedLoopJoinOp</span><span class="p">::</span><span class="n">read_left_operate</span><span class="o">+</span><span class="mi">0</span><span class="n">x39</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">38782</span><span class="n">a2</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObNestedLoopJoinOp</span><span class="p">::</span><span class="n">inner_get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x262</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">56</span><span class="n">aa469</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObOperator</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x189</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">4</span><span class="n">cee252</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObExecuteResult</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x152</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">4</span><span class="n">ced5c7</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObExecuteResult</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x47</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">64084</span><span class="n">ee</span> <span class="n">oceanbase</span><span class="p">::</span><span class="k">sql</span><span class="p">::</span><span class="n">ObResultSet</span><span class="p">::</span><span class="n">get_next_row</span><span class="o">+</span><span class="mi">0</span><span class="n">x13e</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a3c0b01</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">observer</span><span class="p">::</span><span class="n">ObSyncPlanDriver</span><span class="p">::</span><span class="n">response_query_result</span><span class="o">+</span><span class="mi">0</span><span class="n">x3d1</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a3bf493</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">observer</span><span class="p">::</span><span class="n">ObSyncPlanDriver</span><span class="p">::</span><span class="n">response_result</span><span class="o">+</span><span class="mi">0</span><span class="n">x4b3</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a3f5d09</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">observer</span><span class="p">::</span><span class="n">ObMPQuery</span><span class="p">::</span><span class="n">process_single_stmt</span><span class="o">+</span><span class="mi">0</span><span class="n">x3669</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a3f135d</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">observer</span><span class="p">::</span><span class="n">ObMPQuery</span><span class="p">::</span><span class="n">process</span><span class="o">+</span><span class="mi">0</span><span class="n">x222d</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">b3d20bd</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">rpc</span><span class="p">::</span><span class="n">frame</span><span class="p">::</span><span class="n">ObReqProcessor</span><span class="p">::</span><span class="n">run</span><span class="o">+</span><span class="mi">0</span><span class="n">x3ed</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a750cb0</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">omt</span><span class="p">::</span><span class="n">ObWorkerProcessor</span><span class="p">::</span><span class="n">process_one</span><span class="o">+</span><span class="mi">0</span><span class="n">x240</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a72e41a</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">omt</span><span class="p">::</span><span class="n">ObWorkerProcessor</span><span class="p">::</span><span class="n">process</span><span class="o">+</span><span class="mi">0</span><span class="n">x8ea</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a74ea86</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">omt</span><span class="p">::</span><span class="n">ObThWorker</span><span class="p">::</span><span class="n">process_request</span><span class="o">+</span><span class="mi">0</span><span class="n">x3e6</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a72c33d</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">omt</span><span class="p">::</span><span class="n">ObThWorker</span><span class="p">::</span><span class="n">worker</span><span class="o">+</span><span class="mi">0</span><span class="n">x10cd</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">a72c80c</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">omt</span><span class="p">::</span><span class="n">ObThWorker</span><span class="p">::</span><span class="n">run</span><span class="o">+</span><span class="mi">0</span><span class="n">x3c</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">2</span><span class="n">af48ec</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoKThreadTemp</span><span class="o">&lt;</span><span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoUserThreadTemp</span><span class="o">&lt;</span><span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoSetSched</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">::</span><span class="k">start</span><span class="p">()::{</span><span class="n">lambda</span><span class="p">()</span><span class="o">#</span><span class="mi">1</span><span class="p">}::</span><span class="k">operator</span><span class="p">()</span><span class="o">+</span><span class="mi">0</span><span class="n">x4c</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">2</span><span class="n">af477d</span> <span class="n">std</span><span class="p">::</span><span class="n">_Function_handler</span><span class="o">&lt;</span><span class="n">void</span> <span class="p">(),</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoKThreadTemp</span><span class="o">&lt;</span><span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoUserThreadTemp</span><span class="o">&lt;</span><span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoSetSched</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">::</span><span class="k">start</span><span class="p">()::{</span><span class="n">lambda</span><span class="p">()</span><span class="o">#</span><span class="mi">1</span><span class="p">}</span><span class="o">&gt;</span><span class="p">::</span><span class="n">_M_invoke</span><span class="o">+</span><span class="mi">0</span><span class="n">x1d</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="mi">1</span><span class="n">e4f14e</span> <span class="n">std</span><span class="p">::</span><span class="k">function</span><span class="o">&lt;</span><span class="n">void</span> <span class="p">()</span><span class="o">&gt;</span><span class="p">::</span><span class="k">operator</span><span class="p">()</span><span class="o">+</span><span class="mi">0</span><span class="n">x3e</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">af877b5</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoSetSched</span><span class="p">::</span><span class="n">Worker</span><span class="p">::</span><span class="n">run</span><span class="o">+</span><span class="mi">0</span><span class="n">x45</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">af86155</span> <span class="n">oceanbase</span><span class="p">::</span><span class="n">lib</span><span class="p">::</span><span class="n">CoRoutine</span><span class="p">::</span><span class="n">__start</span><span class="o">+</span><span class="mi">0</span><span class="n">x1b5</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
                 <span class="n">af7eeaf</span> <span class="n">finish</span><span class="o">+</span><span class="mi">0</span><span class="n">x0</span> <span class="p">(</span><span class="o">/</span><span class="k">data</span><span class="o">/</span><span class="n">ob</span><span class="o">-</span><span class="n">advanced</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span><span class="p">.</span><span class="n">another</span><span class="o">-</span><span class="k">commit</span><span class="o">-</span><span class="mi">915609</span><span class="n">a0</span><span class="o">-</span><span class="mi">25</span><span class="n">_20</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="o">-</span><span class="n">debug</span><span class="p">)</span>
        <span class="n">ccccccccccccccf4</span> <span class="p">[</span><span class="k">unknown</span><span class="p">]</span> <span class="p">([</span><span class="k">unknown</span><span class="p">])</span>
</code></pre></div></div>

<ol>
  <li>æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">FlameGraph/stackcollapse-perf.pl perf.unfold &amp;&gt; perf.folded</code> ï¼Œæ¥ç€å°†perf.unfoldä¸­çš„ç¬¦å·è¿›è¡ŒæŠ˜å ï¼Œç»„ç»‡æˆç«ç„°å›¾æ‰€éœ€çš„ç»Ÿä¸€æ ¼å¼</li>
  <li>æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">FlameGraph/flamegraph.pl perf.folded &gt; perf.svg</code>ï¼Œæœ€åç”Ÿæˆsvgæ ¼å¼çš„ç«ç„°å›¾</li>
</ol>

<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ ·ä¾‹è„šæœ¬ä¾›è‡ªåŠ¨åŒ–ç”ŸæˆOceanBaseçš„Flame Graphï¼Œæ„Ÿè°¢å¤èµ›çš„lhcmapleé˜Ÿä¼æä¾›äº†è¿™ä¸ªè„šæœ¬ï¼Œæˆ‘ä»¬ç¨ä½œäº†ä¸€äº›æ”¹è¿›ã€‚</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#!/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="o">#</span> <span class="k">no</span> <span class="k">parameter</span> <span class="k">is</span> <span class="n">needed</span><span class="p">,</span> <span class="n">just</span> <span class="n">run</span>
<span class="n">PID</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">ps</span> <span class="o">-</span><span class="n">aux</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">observer</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">v</span> <span class="err">\</span><span class="nv">"grep</span><span class="se">\"</span><span class="nv"> | awk '{print $2}')
if [ ${#PID} -eq 0 ]
then
    echo "</span><span class="n">observer</span> <span class="k">is</span> <span class="k">not</span> <span class="n">running</span><span class="nv">"
    exit -1
fi
perf record -F 99 -g -p $PID -- sleep 20
perf script -i perf.data &amp;&gt; perf.unfold
FlameGraph/stackcollapse-perf.pl perf.unfold &amp;&gt; perf.folded
FlameGraph/flamegraph.pl perf.folded &gt; perf.svg
</span></code></pre></div></div>

<p>å½“ç„¶ï¼Œå°½ç®¡ç«ç„°å›¾çš„å¯è§†åŒ–å¯¹äºæ€§èƒ½ä¼˜åŒ–debugçš„ç¡®å¤§æœ‰è£¨ç›Šï¼Œä½†åŸç”Ÿçš„perfæ“ä½œå¯¹æ•°æ®çš„ç»Ÿè®¡ä¿¡æ¯å’Œæ“æ§ç²’åº¦ä¼šæ›´åŠ ä¸°å¯Œå’Œæ·±å…¥ï¼ŒäºŒè€…äº’ç›¸é…åˆï¼Œæ‰èƒ½ç›¸å¾—ç›Šå½°ã€‚</p>

<p>æ¯”å¦‚æˆ‘ä»¬åœ¨æ­¥éª¤ä¸€ç»Ÿè®¡å®Œperf.dataä¿¡æ¯åï¼Œå¯ä»¥ç›´æ¥è¾“å…¥perf reportæŸ¥çœ‹å‘½ä»¤è¡Œå†…çš„æ ‘çŠ¶ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="/auto-image/picrepo/7ba1f235-7d27-4214-b0e3-730c7c8b90b1.png" alt="image-20220502161010627"></p>

<p>æˆ‘ä»¬è¾“å…¥/group_read_left_operateå¿«é€Ÿæœç´¢å®šä½åˆ°æˆ‘ä»¬æ‰€éœ€è¦çš„å‡½æ•°ï¼š</p>

<p><img src="/auto-image/picrepo/0ed6e010-94ea-484e-871a-a33aa1bd95a3.png" alt="image-20220502161019748"></p>

<p>æ¥ç€æŒ‰ä¸‹aï¼Œå³å¯å±•å¼€å…·ä½“çš„å †æ ˆä¿¡æ¯ï¼Œä¸”ä»¥æ±‡ç¼–çš„å½¢å¼é™ˆåˆ—ï¼Œè¿™ä¾¿å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šæŸäº›ä¼˜åŒ–æ˜¯å¦çœŸæ­£èµ·åˆ°äº†ä½œç”¨ï¼Œæ¯”å¦‚å¾ªç¯å±•å¼€ï¼ˆLoop Unrollingï¼‰ï¼Œå¯èƒ½æˆ‘ä»¬éœ€è¦é€šè¿‡æ±‡ç¼–æ‰èƒ½çœŸæ­£ç¡®å®šå…¶æ˜¯å¦ä¼˜åŒ–åˆ°äº†æˆ‘ä»¬é¢„æœŸçš„æ•ˆæœã€‚</p>

<p><img src="/auto-image/picrepo/438fb9f6-ada8-4371-9da8-1819bf13965f.png" alt="image-20220502161026394"></p>

<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ï¼Œæœ‰äº†å¦‚ä¸Šå¦‚æ­¤æ–¹ä¾¿å¿«æ·çš„è°ƒè¯•æ–¹æ³•å’Œæ€§èƒ½åˆ†æåˆ©å™¨ç«ç„°å›¾ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¾¿éœ€è¦å¼€å§‹ç€æ‰‹æ€è€ƒèµ›é¢˜äº†ã€‚</p>

<h2 id="æ€§èƒ½ä¼˜åŒ–æ–¹å‘">æ€§èƒ½ä¼˜åŒ–æ–¹å‘</h2>

<p>æœ¬æ¬¡èµ›é¢˜æ˜¯åœ¨å¼€æº OceanBase åŸºç¡€ä¹‹ä¸Šï¼Œé’ˆå¯¹ Nested Loop Joinï¼ˆNLJ) åœºæ™¯åšæ€§èƒ½ä¼˜åŒ–ã€‚</p>

<p>æµ‹è¯•æ‰€ä½¿ç”¨çš„æŸ¥è¯¢è¯­å¥ä¸º<code class="language-plaintext highlighter-rouge">select /*+ordered use_nl(A,B)*/ * from t1 A, t2 B where A.c1 &gt;= ? and A.c1 &lt; ? and A.c2 = B.c2 and A.c3 = B.c3;</code>ã€‚</p>

<p>æˆ‘ä»¬explainè¿™æ¡SQLè¯­å¥ï¼Œå¯å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>

<p>å¯ä»¥çœ‹åˆ°ï¼ŒæŸ¥è¯¢è¯­å¥ä¸­åŒ…å«ä¸¤ä¸ªjoinæ¡ä»¶å’Œä¸€ä¸ªå¯¹t1è¡¨çš„èŒƒå›´è¿‡æ»¤ï¼Œåœ¨è¿‡æ»¤åï¼Œå·¦è¡¨t1çš„æ•°æ®é‡ä¼šæ˜¾è‘—å°äºå³è¡¨t2ã€‚åŒæ—¶ï¼Œt1.c2=t2.c2è¿™ä¸€joinæ¡ä»¶ä¼šä½¿ç”¨åˆ°t2.c2è¿™ä¸€ç´¢å¼•ã€‚</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">explain</span> <span class="n">extended</span> <span class="n">select</span> <span class="cm">/*+ordered use_nl(A,B)*/</span> <span class="o">*</span> <span class="n">from</span> <span class="n">t1</span> <span class="n">A</span><span class="p">,</span> <span class="n">t2</span> <span class="n">B</span> <span class="n">where</span> <span class="n">A</span><span class="p">.</span><span class="n">c1</span> <span class="o">&gt;=</span> <span class="mi">56107</span> <span class="n">and</span> <span class="n">A</span><span class="p">.</span><span class="n">c1</span> <span class="o">&lt;</span> <span class="mi">56307</span> <span class="n">and</span> <span class="n">A</span><span class="p">.</span><span class="n">c2</span> <span class="o">=</span> <span class="n">B</span><span class="p">.</span><span class="n">c2</span> <span class="n">and</span> <span class="n">A</span><span class="p">.</span><span class="n">c3</span> <span class="o">=</span> <span class="n">B</span><span class="p">.</span><span class="n">c3</span><span class="p">;</span>
<span class="o">|</span> <span class="o">================================================</span>
<span class="o">|</span><span class="n">ID</span><span class="o">|</span><span class="n">OPERATOR</span>        <span class="o">|</span><span class="n">NAME</span>    <span class="o">|</span><span class="n">EST</span><span class="p">.</span> <span class="n">ROWS</span><span class="o">|</span><span class="n">COST</span>   <span class="o">|</span>
<span class="o">------------------------------------------------</span>
<span class="o">|</span><span class="mi">0</span> <span class="o">|</span><span class="n">NESTED</span><span class="o">-</span><span class="n">LOOP</span> <span class="n">JOIN</span><span class="o">|</span>        <span class="o">|</span><span class="mi">2718</span>     <span class="o">|</span><span class="mi">1306675</span><span class="o">|</span>
<span class="o">|</span><span class="mi">1</span> <span class="o">|</span> <span class="n">TABLE</span> <span class="n">SCAN</span>     <span class="o">|</span><span class="n">A</span>       <span class="o">|</span><span class="mi">200</span>      <span class="o">|</span><span class="mi">78</span>     <span class="o">|</span>
<span class="o">|</span><span class="mi">2</span> <span class="o">|</span> <span class="n">TABLE</span> <span class="n">SCAN</span>     <span class="o">|</span><span class="n">B</span><span class="p">(</span><span class="n">t2_i1</span><span class="p">)</span><span class="o">|</span><span class="mi">10</span>       <span class="o">|</span><span class="mi">6530</span>   <span class="o">|</span>
<span class="o">================================================</span>
<span class="o">----</span>
<span class="mi">2</span> <span class="o">-</span> <span class="n">is_index_back</span><span class="o">=</span><span class="nb">true</span>
<span class="o">----</span>
</code></pre></div></div>

<h3 id="èƒŒæ™¯">èƒŒæ™¯</h3>

<p>NLJçš„åŸºæœ¬åŸç†æ˜¯æ¯æ¬¡ä»å·¦è¡¨è·å–ä¸€è¡Œï¼Œç„¶åç”¨è¿™è¡Œæ•°æ®å’Œå³è¡¨è¿›è¡ŒJOINã€‚</p>

<p>é€šå¸¸æ¥è¯´ï¼Œæœ€ç®€å•çš„æƒ³æ³•å°±æ˜¯ç›´æ¥æŠŠå³è¡¨çš„å…¨éƒ¨æ•°æ®æ‰«æä¸Šæ¥ï¼Œå†è·Ÿå·¦è¡¨çš„è¿™è¡Œæ•°æ®è¿›è¡ŒJOINçš„è¯ï¼Œé‚£ä¹ˆç¨‹åºæ•´ä½“çš„å¤æ‚åº¦å°±æ˜¯ï¼šM(å·¦è¡¨è¡Œæ•°)*N(å³è¡¨è¡Œæ•°)ã€‚</p>

<p>ä½†åœ¨å¤§éƒ¨åˆ†çš„å®é™…åœºæ™¯ï¼Œä¸ºäº†é™ä½å¤æ‚åº¦ï¼Œå³è¡¨è·å–æ•°æ®å¯ä»¥é€‰å–å…¶ä»–ä¸¤ç§æ–¹æ¡ˆï¼š</p>

<ol>
  <li>JOINæ¡ä»¶æœ¬èº«æ˜¯å³è¡¨çš„rowkey(ä¸»é”®)ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ä¸»é”®ç´¢å¼•è·å–åˆ°å³è¡¨è¡Œï¼ˆå‡è®¾æ˜¯èšåˆç´¢å¼•ï¼‰ï¼›</li>
  <li>å³è¡¨ä¸Šé¢æœ‰æ™®é€šç´¢å¼•ï¼ŒJOINæ¡ä»¶å¯ä»¥å‘½ä¸­ç´¢å¼•ï¼Œé‚£ä¹ˆå¯ä»¥æ ¹æ®å·¦è¡¨è¿™è¡Œæ•°æ®å…ˆå»æŸ¥å³è¡¨çš„ç´¢å¼•ï¼Œè·å¾—åˆ°å³è¡¨çš„rowkey(ä¸»é”®)ï¼Œå†åˆ©ç”¨ä¸»é”®å»æŸ¥æ‰¾å³è¡¨(è¿™ä¸ªè¿‡ç¨‹å«åšå›è¡¨)ï¼Œè·å–åˆ°å®Œæ•´çš„è¡Œï¼›</li>
</ol>

<p>ç”±äºæœ¬æ¬¡å¤§èµ›çš„é¢˜ç›®ä¸­å³è¡¨ä¸Šå­˜åœ¨ç´¢å¼•ï¼Œå› æ­¤å¯ä»¥åº”ç”¨æ–¹å¼2ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»ä¸Šè¿°EXPLAINæ‰§è¡Œè®¡åˆ’å°è¯è¿™ä¸€ç‚¹ï¼šå·¦è¡¨æ˜¯t1ï¼Œå³è¡¨æ˜¯t2ï¼Œæ‰«æå³è¡¨èµ°äº†ç´¢å¼•t2_i1å›è¡¨ã€‚</p>

<h3 id="nljæ•´ä½“æ‰§è¡Œæµç¨‹">NLJæ•´ä½“æ‰§è¡Œæµç¨‹</h3>

<p>å…·ä½“æ¥è¯´ï¼Œè¯¥åœºæ™¯çš„å…·ä½“å®ç°å¯ä»¥åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼šå·¦è¡¨scanã€rescanå’Œå³è¡¨scanå›è¡¨ã€‚</p>

<p><strong>å·¦è¡¨scanï¼š</strong>åœ¨è¿™ä¸ªåœºæ™¯ä¸­å°±æ˜¯å¯¹t1è¡¨ï¼Œæ ¹æ®ä¸»é”®èŒƒå›´è¿›è¡Œæ‰«æï¼Œå¹¶é€è¡Œè¿”å›ï¼Œè¯¥æ¨¡å—æ¶‰åŠåˆ°çš„å‡½æ•°è°ƒç”¨å…³ç³»ä¸ºï¼š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ObNestedLoopJoinOp</span><span class="p">.</span><span class="n">read_left_operate</span><span class="o">-&gt;</span><span class="n">ObJoinOp</span><span class="p">.</span><span class="n">get_next_left_row</span><span class="o">-&gt;</span><span class="n">ObOperator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span>
<span class="n">ObTableScanOp</span><span class="p">.</span><span class="n">inner_get_next_row</span><span class="o">-&gt;</span><span class="n">ObTableScanIterator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObTableScanRangeArrayRowIterator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span>
<span class="c1">//å¾€ä¸‹ä¸ºå­˜å‚¨å±‚</span>
<span class="n">ObTableScanStoreRowIterator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObMultipleMerge</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObMultipleScanMerge</span><span class="p">.</span><span class="n">inner_get_next_row</span><span class="o">-&gt;</span><span class="p">...</span>
<span class="n">ObStoreRowIterator</span><span class="p">.</span><span class="n">get_next_row_ext</span><span class="o">-&gt;</span><span class="p">...</span>
</code></pre></div></div>

<p><strong>rescanï¼š</strong>rescanå‘ç”Ÿåœ¨å·¦è¡¨çš„ä¸Šä¸€è¡Œé’ˆå¯¹å³è¡¨å·²ç»å®Œæˆäº†JOINçš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™OBå¹¶ä¸ä¼šç›´æ¥å…³é—­å³è¡¨çš„æ‰«æï¼Œè€Œæ˜¯é€šè¿‡rescané‡ç½®å³è¡¨çš„æ‰«æçŠ¶æ€ï¼Œä¹‹ååœ¨å·¦è¡¨æ‰«æä¸‹ä¸€è¡Œæ—¶å¯ä»¥ç›´æ¥å¼€å§‹å³è¡¨çš„æ‰«æï¼Œè€Œä¸ç”¨é‡æ–°æ‰“å¼€ã€‚å…·ä½“æ¥è¯´ï¼Œè¯¥æ¨¡å—æ¶‰åŠåˆ°çš„å‡½æ•°è°ƒç”¨å…³ç³»ä¸ºï¼š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ObNestedLoopJoinOp</span><span class="p">.</span><span class="n">read_left_func_going</span><span class="o">-&gt;</span>
<span class="n">ObTableScanOp</span><span class="p">.</span><span class="n">rescan</span><span class="o">-&gt;</span><span class="n">ObTableScanOp</span><span class="p">.</span><span class="n">rt_rescan</span><span class="o">-&gt;</span><span class="n">ObTableScanOp</span><span class="p">.</span><span class="n">rescan_after_adding_query_range</span><span class="o">-&gt;</span>
<span class="c1">//å¾€ä¸‹ä¸ºå­˜å‚¨å±‚</span>
<span class="n">ObTableScanIterIterator</span><span class="p">.</span><span class="n">rescan</span><span class="o">-&gt;</span><span class="n">ObTableScanStoreRowIterator</span><span class="p">.</span><span class="n">rescan</span><span class="o">-&gt;</span>
<span class="p">...</span>
</code></pre></div></div>

<p><strong>å³è¡¨scanå›è¡¨ï¼š</strong>åœ¨è¿™ä¸ªåœºæ™¯ä¸­å°±æ˜¯å…ˆé€šè¿‡B.c2åˆ—æŸ¥è¯¢ç´¢å¼•t2_i1ï¼Œè·å–åˆ°rowkeyåå†æŸ¥è¯¢t2çš„è¿‡ç¨‹ï¼Œè¯¥æ¨¡å—æ¶‰åŠåˆ°çš„å‡½æ•°è°ƒç”¨å…³ç³»ä¸ºï¼š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ObNestedLoopJoinOp</span><span class="p">.</span><span class="n">read_right_operate</span><span class="o">-&gt;</span><span class="n">ObJoinOp</span><span class="p">.</span><span class="n">get_next_right_row</span><span class="o">-&gt;</span><span class="n">ObOperator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span>
<span class="n">ObTableScanOp</span><span class="p">.</span><span class="n">inner_get_next_row</span><span class="o">-&gt;</span><span class="n">ObTableScanIterator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObTableScanRangeArrayRowIterator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span>
<span class="c1">//å¾€ä¸‹ä¸ºå­˜å‚¨å±‚</span>
<span class="n">ObTableScanStoreRowIterator</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObIndexMerge</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span>
<span class="p">...</span>
</code></pre></div></div>

<h3 id="å­˜å‚¨å±‚æŸ¥è¯¢æµç¨‹">å­˜å‚¨å±‚æŸ¥è¯¢æµç¨‹</h3>

<p>OBçš„å­˜å‚¨æ˜¯åŸºäºLSM-Treeå®ç°çš„ï¼Œå…·ä½“å†…å®¹å¯ä»¥å‚è€ƒOBå¼€æºå®˜ç½‘æ–‡æ¡£ <a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/lsm-tree-architecture">LSM Tree æ¶æ„</a>ï¼Œä»¥åŠåŒä¸€ä¸ªç« èŠ‚ä¸‹çš„å…¶å®ƒå†…å®¹ã€‚</p>

<p>å­˜å‚¨å±‚æŸ¥è¯¢æ˜¯åœ¨å¤šä¸ªmemtableã€sstableä¸Šè¿­ä»£ã€å½’å¹¶çš„è¿‡ç¨‹ï¼ŒæŒ‰å•è¡Œè¿”å›ç»™ä¸Šå±‚ã€‚</p>

<p>OBç›®å‰çš„å®ç°æ˜¯ä¸ºæ¯ä¸€ä¸ªmemtable/sstableå¯¹åº”åˆ†é…ä¸€ä¸ªiteratorï¼Œå¤šä¸ªmemtable/sstableå¯¹åº”çš„iteratorsç»´æŠ¤åœ¨ObMultipleMergeç±»ä¸­ï¼Œç”±Mergeç±»å®Œæˆä»æ¯ä¸ªiteratorè·å–1è¡Œæ•°æ®ï¼Œç„¶åå†è¿›è¡Œå½’å¹¶çš„ä»»åŠ¡ã€‚</p>

<p>åŒæ—¶ï¼ŒOBçš„sstableå†…éƒ¨æ˜¯æŒ‰ç…§å®å—-å¾®å—-è¡Œä¸‰å±‚å­˜å‚¨ç²’åº¦ç»„æˆï¼Œåœ¨iteratorå†…éƒ¨ä¼šå…ˆæ ¹æ®æŸ¥è¯¢rangeå®šä½åˆ°å¾®å—ï¼Œç„¶åé€šè¿‡å¾®å—å¯¹åº”çš„ObMicroBlockRowScanneræ‰“å¼€è¯»è¡Œã€‚</p>

<p>æ€»ç»“æ¥è¯´ï¼ŒNLJæŸ¥è¯¢æ¶‰åŠçš„åˆ°å­˜å‚¨å±‚ç»“æ„å¯ä»¥åˆ†ä¸º3å±‚ï¼Œmultiple mergeå±‚ï¼Œstore row iterå±‚ï¼Œmicro scanner/getterå±‚ï¼Œå…¶å…³è”å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">multiple</span> <span class="n">merge</span>
<span class="o">--</span> <span class="n">iters</span> <span class="err">ç»´æŠ¤å¤šä¸ª</span><span class="n">memtable</span><span class="o">/</span><span class="n">sstable</span><span class="err">çš„</span><span class="n">iterator</span><span class="err">ï¼ŒæŸ¥è¯¢å¯èƒ½æ¶‰åŠåˆ°å¤šä¸ª</span><span class="n">memtable</span><span class="o">/</span><span class="n">sstable</span><span class="err">åšå½’å¹¶</span>
<span class="n">store</span> <span class="n">row</span> <span class="n">iter</span>
<span class="o">--</span> <span class="err">å•ä¸ª</span><span class="n">memtable</span><span class="o">/</span><span class="n">sstable</span><span class="err">å¯¹åº”çš„è¿­ä»£å™¨</span>
<span class="n">micro</span> <span class="n">scanner</span><span class="o">/</span><span class="n">getter</span>
<span class="o">--</span> <span class="err">å¾®å—è¿­ä»£å™¨</span>
</code></pre></div></div>

<p>æ‰€ä»¥ç†è®ºä¸Šå¯¹äºåŒä¸€ä¸ªæŸ¥è¯¢ä¸­ï¼ŒåŒä¸€ä¸ªmemtable/sstableåªéœ€è¦1ä¸ªiteratorå°±å¯ä»¥äº†ã€‚å°½ç®¡å¯¹NLJ rescanåœºæ™¯éœ€è¦å¯¹å³è¡¨è¿›è¡Œå¤šæ¬¡éå†ï¼Œä½†åœ¨ç†æƒ³æƒ…å†µä¸‹è¿˜æ˜¯å¯ä»¥åªç”¨è¿™1ä¸ªiteratorå®Œæˆå¤šæ¬¡éå†ï¼Œä¸è¿‡OBç›®å‰çš„ç‰ˆæœ¬å¹¶æ²¡æœ‰å®ç°è¿™ä¸€ç‚¹ã€‚</p>

<p>åŒæ—¶ï¼Œåœ¨sstable iteratorå†…éƒ¨å®é™…è¯»æ•°æ®æ—¶ï¼Œæ˜¯é€šè¿‡é¢„å–(prefetch)çš„æ–¹å¼æŠŠIOå’Œè§£æè¯»åˆ°çš„è¡Œæ•°æ®ä¸²è”èµ·æ¥ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„IOï¼ŒCPUä¹Ÿå¯ä»¥æµæ°´çº¿æ‰§è¡Œï¼Œæå¤§æå‡äº†æ•ˆç‡ã€‚</p>

<p>è€Œé’ˆå¯¹ç›®å‰è¿™ä¸ªNLJåœºæ™¯ï¼Œä»æ‰§è¡Œè®¡åˆ’å¯ä»¥çœ‹å‡ºè¿™ä¸ªæŸ¥è¯¢ä¼šå¯¹ä¸¤å¼ è¡¨è¿›è¡Œtable scanï¼Œå¯¹t1è¡¨ä½¿ç”¨æ™®é€šçš„è¿­ä»£ï¼Œå¯¹t2è¡¨ä½¿ç”¨ç´¢å¼•å›è¡¨ï¼ˆOBçš„ç´¢å¼•å›è¡¨å®ç°åœ¨ObIndexMergeä¸­ï¼‰ã€‚</p>

<p>å…¶è½å®åˆ°æŸ¥è¯¢å±‚çš„è°ƒç”¨é“¾è·¯å’Œæ‰§è¡Œè¿‡ç¨‹åˆ—ä¸¾å¦‚ä¸‹ï¼š</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">1.</span> <span class="err">åˆ›å»º</span><span class="n">iterator</span><span class="err">å¹¶å¼€å§‹ç¬¬</span><span class="mi">1</span><span class="err">æ¬¡é¢„å–</span>
<span class="n">ObTableScanStoreRowIterator</span><span class="p">.</span><span class="n">open_iter</span><span class="o">-&gt;</span><span class="n">ObMultipleScan</span><span class="p">(</span><span class="n">get</span><span class="p">)</span><span class="n">Merge</span><span class="p">.</span><span class="n">construct_iters</span><span class="o">-&gt;</span><span class="n">ObSSTable</span><span class="p">(</span><span class="n">ObMemtable</span><span class="p">).</span><span class="n">scan</span><span class="p">(</span><span class="n">get</span><span class="p">)</span><span class="o">-&gt;</span> <span class="c1">//åˆ†é…iterator</span>
<span class="n">ObISSTableRowIterator</span><span class="p">.</span><span class="n">init</span><span class="o">-&gt;</span><span class="n">ObSSTableRowIterator</span><span class="p">.</span><span class="n">inner_open</span><span class="o">-&gt;</span> <span class="c1">// åˆå§‹åŒ–iterator</span>
<span class="n">ObSSTableRowIterator</span><span class="p">.</span><span class="n">prefetch</span> <span class="c1">//é¢„å–æ•°æ®</span>
<span class="mf">2.1</span><span class="p">.</span> <span class="err">æŒç»­é¢„å–å¹¶è¯»æ•°æ®</span><span class="p">(</span><span class="err">éå›è¡¨</span><span class="p">)</span>
<span class="n">get_next_row</span><span class="o">-&gt;</span><span class="p">..</span>
<span class="mf">2.2</span><span class="p">.</span> <span class="err">å›è¡¨è¯»å–æ•°æ®</span>
<span class="n">ObIndexMerge</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObMultipleMerge</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObMultipleScanMerge</span><span class="p">.</span><span class="n">inner_get_next_row</span><span class="o">-&gt;</span><span class="p">...</span>
<span class="o">-&gt;</span><span class="n">ObMultipleMerge</span><span class="p">.</span><span class="n">get_next_row</span><span class="o">-&gt;</span><span class="n">ObMultipleGetMerge</span><span class="p">.</span><span class="n">inner_get_next_row</span><span class="o">-&gt;</span><span class="p">...</span>
</code></pre></div></div>

<h3 id="ä¼˜åŒ–æ–¹å‘">ä¼˜åŒ–æ–¹å‘</h3>

<p><img src="/auto-image/picrepo/6fa0542d-9417-4274-8dac-386420371303.png" alt="image-20220502161042457"></p>

<p>ä¸éš¾ä»OBçš„NLJå®ç°ä¸­å’Œç«ç„°å›¾çš„å æ¯”ä¸Šçœ‹å‡ºrescanå’Œå³è¡¨scanå›è¡¨å¯¹æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬ä»¥rescanä¸ºä¾‹åˆ†æå½“å‰çš„å®ç°å’Œå¯ä»¥æ”¹è¿›çš„æ–¹å‘ã€‚</p>

<p>é¦–å…ˆé’ˆå¯¹rescanï¼Œå®ƒçš„ä½œç”¨æ˜¯ä½¿å³è¡¨å¤šæ¬¡çš„æ‰«æå¯ä»¥å°½é‡å¤ç”¨å¯¹è±¡ï¼Œåœ¨å¦‚ä¸‹ä»£ç ä¸­å¯ä»¥çœ‹åˆ°rescané‡Šæ”¾å’Œä¿ç•™(é‡ç½®)äº†å“ªäº›å¯¹è±¡ï¼š</p>

<p><img src="/auto-image/picrepo/fa53eaa5-587e-4b79-8ad8-69f548effc54.png" alt="image-20220502161050205"></p>

<p><img src="/auto-image/picrepo/4acdae4b-aa5d-4fc7-92f9-13c4edffa858.png" alt="image-20220502161106412"></p>

<ul>
  <li>rescanè°ƒç”¨äº†reuse_row_itersï¼Œæ„å›¾é‡ç”¨è¿™ä¸ªiterå¯¹è±¡ï¼Œä½†æ˜¯åœ¨å…¶å†…éƒ¨å®ç°ï¼Œè¿˜æ˜¯è°ƒç”¨äº†~ObStoreRowIteratorï¼Œç»è¿‡ç»§æ‰¿å…³ç³»ï¼ˆObSSTableRowIteratorâ†’ObISSTableRowIteratorâ†’ObSSTableRowIteratorï¼‰æœ€ç»ˆé€šè¿‡ObSSTableRowIteratorææ„æ‰äº†è¿™ä¸ªiterå¯¹è±¡ï¼Œå¹¶æ¸…ç©ºäº†itersæ•°ç»„ï¼Œå®é™…å¹¶æ²¡æœ‰èµ·åˆ°å¤ç”¨çš„æ•ˆæœã€‚</li>
  <li>è€Œç°åœ¨çš„å®ç°å®é™…ä¸Šæ˜¯åœ¨open_iterä¸­è°ƒç”¨äº†construct_itersï¼Œæ¥ç€å†è°ƒç”¨scanå‡½æ•°è¿›è¡Œiterçš„åˆå§‹åŒ–å’Œé‡æ–°åˆ†é…ï¼Œå…¶è°ƒç”¨æ ˆä¿¡æ¯å¦‚ä¸‹ç«ç„°å›¾æ‰€ç¤ºï¼š</li>
</ul>

<p><img src="/auto-image/picrepo/8a897d27-6049-42c0-a176-690e3c344692.png" alt="image-20220502161117726"></p>

<p>åŒæ—¶åœ¨scanå‡½æ•°ä¸­ä¹Ÿä¼šè°ƒç”¨initè¿›è€Œé€šè¿‡inner_openå‡½æ•°è¿›è¡Œå®é™…çš„iteråˆ†é…ï¼Œæœ€åè®¾ç½®row_iterçš„å€¼ã€‚</p>

<p><img src="/auto-image/picrepo/bb357b7d-b7bc-4507-ae06-c204e5a120dc.png" alt="image-20220502161125114"></p>

<p>æ‰€ä»¥å¯¹äºå¤šæ¬¡æ‰«æå®é™…ä½¿ç”¨çš„éƒ½æ˜¯sstable iterå¯¹è±¡ï¼Œè¿™é‡Œç›´æ¥çš„æ”¹è¿›æ–¹å‘æ˜¯ï¼Œrescanä¸­ä¸è¦ææ„æ‰å’Œæ¸…ç†itersæ•°ç»„ï¼Œç„¶åä¿æŒitersåœ¨æ•´ä¸ªæŸ¥è¯¢(å¤šæ¬¡rescan)ä¸€ç›´æœ‰æ•ˆã€‚</p>

<p>ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬çš„å¤§è‡´æ€è·¯å¦‚ä¸‹ï¼š</p>

<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å†…å­˜ä¿æŒæœ‰æ•ˆï¼Œåœ¨æœ€å¼€å§‹åˆ†é…iterçš„åœ°æ–¹ä½¿ç”¨é€‚å½“çš„èµ„æºåˆ†é…å™¨ï¼ˆallocatorï¼‰ä¿è¯æ•´ä¸ªæŸ¥è¯¢æœŸé—´å†…å­˜éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼›æ¥ç€å½“é‡åˆ°ææ„çš„æ—¶å€™ä¸å†ç›´æ¥é‡Šæ”¾å˜é‡ï¼Œè€Œæ˜¯è°ƒç”¨iterçš„reuseæ¥å£ï¼Œä½†åŒæ—¶ä¹Ÿéœ€è¦ä¿ç•™æŸäº›å¿…é¡»çš„æ¸…ç†åŠ¨ä½œï¼Œæœ€å¤§åŒ–å¤ç”¨è¿­ä»£å™¨ï¼Œä»¥å®ç°æ€§èƒ½çš„æå‡ã€‚</p>

<p>ä»¥ä¸Šå³æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¸Œæœ›èƒ½ä¸ºå„ä½åŒä»æä¾›ä¸€äº›å¸®åŠ©å’Œæ€è·¯ä¸Šçš„å¯å‘ï¼Œå¦‚æœ‰ç–‘é—®ä¹Ÿå¯è”ç³»æˆ‘ä»¬è¿›è¡Œäº¤æµã€‚</p>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/get-the-oceanbase-database-by-using-source-code">ä½¿ç”¨æºç æ„å»º OceanBase æ•°æ®åº“</a></li>
  <li><a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/deploy-the-oceanbase-database-by-using-obd">ä½¿ç”¨ OBD éƒ¨ç½² OceanBase æ•°æ®åº“</a></li>
  <li><a href="https://linuxize.com/post/install-rpm-packages-on-ubuntu/">Install RPM packages on Ubuntu</a></li>
  <li><a href="https://github.com/oceanbase/obdeploy/blob/master/README-CN.md#obd-cluster-tenant-create">OceanBase Deployer</a></li>
  <li><a href="https://help.aliyun.com/apsara/enterprise/v_3_13_0_20201215/oceanbase/enterprise-user-guide/hint-overview.html">Hint æ¦‚è¿°</a></li>
  <li><a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/lsm-tree-architecture">LSM Tree æ¶æ„</a></li>
  <li><a href="https://code.visualstudio.com/docs/cpp/launch-json-reference">Configuring C/C++ debugging</a></li>
  <li><a href="https://www.cnblogs.com/happyliu/p/6142929.html">perf + ç«ç„°å›¾åˆ†æç¨‹åºæ€§èƒ½</a></li>
  <li><a href="https://blog.eastonman.com/blog/2021/02/use-perf/">ä½¿ç”¨Perfè¿›è¡Œç¨‹åºçƒ­ç‚¹åˆ†æ</a></li>
  <li><a href="https://www.brendangregg.com/perf.html">perf Examples</a></li>
  <li><a href="https://www.brendangregg.com/flamegraphs.html">Flame Graphs</a></li>
  <li><a href="https://queue.acm.org/detail.cfm?id=2927301">The Flame Graph</a></li>
</ul>
  </section>

  
  
  

  <section class="background" data-size="page">
    <!--
  background: ;
  dark: ;
  size: ;
-->


<div class="post-nav">
  <span>
    
      <i class="icon fa-solid fa-angle-left"></i> Previous post<br>
      <a href="/2022/03/31/OceanBase%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%94%AF%E6%8C%81%E8%83%BD%E5%8A%9B%E8%AF%84%E6%B5%8B%E4%B8%8E%E5%88%86%E6%9E%90.html">
        OceanBaseå¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„æ”¯æŒèƒ½åŠ›è¯„æµ‹ä¸åˆ†æ
      </a>
    
  </span>
  <span>
    
      Next post <i class="icon fa-solid fa-angle-right"></i><br>
      <a href="/2022/05/11/%E4%BB%8E%E6%9F%A5%E8%AF%A2%E6%A0%91%E7%9A%84%E7%94%9F%E6%88%90%E5%88%B0%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C-%E4%BB%A5Index-Nested-Loop-Join%E4%B8%BA%E4%BE%8B.html">
        ä»æŸ¥è¯¢æ ‘çš„ç”Ÿæˆåˆ°æŸ¥è¯¢æ‰§è¡Œ â€” ä»¥Index Nested Loop Joinä¸ºä¾‹
      </a>
    
  </span>
</div>
  </section>


    </main>
    


<footer class="background" style="--image: url('')" data-dark="true" data-size="wide">
  <!--
    <div>
      Extra details like contact info or address
    </div>
  -->

  <div>
    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="mailto:rzhang@dase.ecnu.edu.cn" data-tooltip="Email" data-style="bare" aria-label="Email">
      <i class="icon fa-solid fa-envelope"></i>
      
    </a>
  </div>


    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="tel:021-62235006" data-tooltip="Phone number" data-style="bare" aria-label="Phone number">
      <i class="icon fa-solid fa-phone"></i>
      
    </a>
  </div>


    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="https://orcid.org/0000-0002-5182-2093" data-tooltip="ORCID" data-style="bare" aria-label="ORCID">
      <i class="icon fa-brands fa-orcid"></i>
      
    </a>
  </div>


    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="https://scholar.google.com/citations?user=iJtZsaQAAAAJ" data-tooltip="Google Scholar" data-style="bare" aria-label="Google Scholar">
      <i class="icon fa-brands fa-google"></i>
      
    </a>
  </div>


    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="https://github.com/dbhammer" data-tooltip="GitHub" data-style="bare" aria-label="GitHub">
      <i class="icon fa-brands fa-github"></i>
      
    </a>
  </div>


    
  </div>

  <div>
    Â© 2025
    DBHammer
    Â  | Â  Built with
    <a href="https://github.com/greenelab/lab-website-template">
      Lab Website Template
    </a>
  </div>

  <input type="checkbox" class="dark-toggle" data-tooltip="Dark mode" aria-label="toggle dark mode" oninput="onDarkToggleChange(event)">
</footer>

  </body>
</html>
